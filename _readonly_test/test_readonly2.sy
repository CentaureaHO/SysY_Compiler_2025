// 全局变量
const int CONST_FACTORIAL_MAX = 10;  // 编译期常量
int READ_ONLY_FACTORIAL_RESULT[11] = {1, 1, 2, 6, 24, 120, 720, 5040, 40320, 362880, 3628800};  // 预计算结果
int MODIFIED_DURING_RECURSION = 0;  // 递归过程中会修改
int factorial_calls = 0;  // 记录调用次数

// 递归计算阶乘，同时修改全局计数器
int factorial(int n) {
    factorial_calls = factorial_calls + 1;
    
    if (n <= 1) {
        MODIFIED_DURING_RECURSION = 1;
        return 1;
    }
    
    return n * factorial(n-1);
}

int main() {
    int result = 0;
    int i = 0;
    
    // 使用递归计算阶乘
    result = factorial(5);
    putint(result);
    putint(factorial_calls);
    
    // 只读访问预计算表
    for (i = 0; i <= CONST_FACTORIAL_MAX; i = i + 1) {
        result = READ_ONLY_FACTORIAL_RESULT[i];
    }
    
    return 0;
}

// ✅ CONST_FACTORIAL_MAX - const声明的常量
// ✅ READ_ONLY_FACTORIAL_RESULT - 虽无const声明但实际未修改的数组